# View: v_gen_diccionario_web

```sql

/*SE MODIFICA LA CONSULTA CON LA TABLA sysindexkeys PARA QUE SE VISUALICEN TODOS LOS CAMPOS DE UNA TABLA
JSARMIENTO SEPTIEMBRE/2011
2018/09/26 se toma la longitud total de alias TABLA y NOM_CAMPO*/
CREATE VIEW [dbo].[v_gen_diccionario_web]
AS
SELECT RTRIM(O.name) AS TABLA, RTRIM(C.name) AS NOM_CAMPO,
		C.colorder AS ORDEN,
        (SELECT     CONVERT(VARCHAR(250), value) FROM ::fn_listextendedproperty('MS_Description', 'user', 'dbo', 'table', RTRIM(o.name), 'column', c.name)) AS DESCRIP, 
        CASE I.INDID WHEN 1 THEN 'SI' WHEN 2 THEN 'SI' ELSE 'NO' END AS LLAVE, 
        CASE C.TYPE WHEN 35 THEN 'TEXT' WHEN 37 THEN 'BINARY' WHEN 38 THEN 'SMALLINT' WHEN 39 THEN 'CHAR' WHEN 47 THEN 'CHAR' WHEN 47
        THEN 'TINYINT' WHEN 50 THEN 'BIT' WHEN 52 THEN 'SMALLINT' WHEN 55 THEN 'DECIMAL' WHEN 56 THEN 'INT' WHEN 60 THEN 'DECIMAL' WHEN
        61 THEN 'DATETIME' WHEN 62 THEN 'FLOAT' WHEN 63 THEN 'NUMERIC' WHEN 106 THEN 'DECIMAL' WHEN 108 THEN 'NUMERIC' WHEN 109 THEN
        'FLOAT' WHEN 110 THEN 'MONEY' WHEN 111 THEN 'DATETIME' ELSE CONVERT(CHAR, C.TYPE) END AS TIPO, C.length AS LONGITUD, 
        CASE isnullable WHEN 0 THEN 'NO' WHEN 1 THEN 'SI' ELSE 'NO' END AS PER_NULOS, 
        CASE WHEN C.TYPE = 38 THEN C.XPREC WHEN C.TYPE = 52 THEN C.XPREC WHEN C.TYPE = 55 THEN C.XPREC WHEN C.TYPE = 56 THEN C.XPREC WHEN
        C.TYPE = 60 THEN C.XPREC WHEN C.TYPE = 62 THEN C.XPREC WHEN C.TYPE = 63 THEN C.XPREC WHEN C.TYPE = 106 THEN C.XPREC WHEN C.TYPE
        = 108 THEN C.XPREC WHEN C.TYPE = 109 THEN C.XPREC WHEN C.TYPE = 110 THEN C.XPREC ELSE 0 END AS PRECISO, C.xscale AS ESCALA, 
        CONVERT(varchar(250), ISNULL(RTRIM(V.text), '')) AS PREDETER, R.rkeyid
FROM sys.sysobjects AS O WITH(NOLOCK)
	INNER JOIN sys.syscolumns AS C WITH(NOLOCK) ON O.id = C.id 
	LEFT OUTER JOIN sys.syscomments AS V WITH(NOLOCK) ON C.cdefault = V.id 
	LEFT OUTER JOIN sys.sysindexkeys AS I WITH(NOLOCK) ON O.id = I.id AND C.colid = I.colid 
	LEFT OUTER JOIN sys.sysreferences AS R WITH(NOLOCK) ON O.id = R.fkeyid AND C.colid = R.fkey1;

```
